webpackJsonp([12],{595:function(e,t,n){function o(e){n(685)}var a=n(41)(n(650),n(713),o,null,null);e.exports=a.exports},597:function(e,t,n){e.exports={default:n(598),__esModule:!0}},598:function(e,t,n){var o=n(29),a=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},603:function(e,t,n){"use strict";n.d(t,"h",function(){return l}),n.d(t,"i",function(){return c}),n.d(t,"n",function(){return u}),n.d(t,"k",function(){return d}),n.d(t,"l",function(){return f}),n.d(t,"m",function(){return p}),n.d(t,"j",function(){return h}),n.d(t,"s",function(){return g}),n.d(t,"p",function(){return m}),n.d(t,"b",function(){return v}),n.d(t,"g",function(){return y}),n.d(t,"d",function(){return b}),n.d(t,"a",function(){return w}),n.d(t,"e",function(){return C}),n.d(t,"c",function(){return j}),n.d(t,"f",function(){return x}),n.d(t,"o",function(){return T}),n.d(t,"q",function(){return _}),n.d(t,"r",function(){return F});var o=n(76),a=n.n(o),i=n(233),r=n.n(i),s=n(232),l=function(){return r.a.post(s.a+"/jade/agent/selectAgent.action",{},{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},c=function(e){return r.a.post(s.a+"/jade/agent/getAgentBySid.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},u=function(e){return r.a.post(s.a+"/jade/agent/setUserNumber.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},d=function(e){return r.a.post(s.a+"/jade/agent/cancelAgent.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},f=function(e){return r.a.post(s.a+"/jade/agent/activationAgent.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},p=function(e){return r.a.post(s.a+"/jade/agent/delAgent.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},h=function(e){return r.a.post(s.a+"/jade/agent/getUserMessage.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},g=function(e){return r.a.post(s.a+"/jade/agent/addAgent.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},m=function(e){return r.a.post(s.a+"/jade/agent/updateAgent.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},v=function(e){return r.a.post(s.a+"/jade/authority/getAllAuthority.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},y=function(e){return r.a.post(s.a+"/jade/authority/addRole.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},b=function(e){return r.a.post(s.a+"/jade/authority/updateRole.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},w=function(e){return r.a.post(s.a+"/jade/authority/getRoleList.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},C=function(e){return r.a.post(s.a+"/jade/authority/delRole.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},j=function(e){return r.a.post(s.a+"/jade/authority/getRoleAuthority.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},x=function(e){return r.a.post(s.a+"/jade/authority/authorityOfDistribution.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},T=function(e){return r.a.post(s.a+"/jade/agent/addAgentAccount.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},_=function(e){return r.a.post(s.a+"/jade/authority/DelUser.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},F=function(e){return r.a.post(s.a+"/jade/authority/addUser.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})}},650:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(149),a=n.n(o),i=n(597),r=n.n(i),s=n(603),l={};t.default={data:function(){return{topics:[{comment:"",addPerson:"",createTime:"",reserve1:"",reserve2:"",roleId:"",roleName:""}],filters:{name:""},roles:sessionStorage.getItem("rules"),totalData:[],total:0,page:1,pageSize:10,listLoading:!1,showFormVisible:!1,showLoading:!1,filterText:"",defaultProps:{children:"children",label:"label"},editFormVisible:!1,editLoading:!1,rules:[],ruleForm:{roleName:"",comment:""},rulesFrom:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}]}}},methods:{getTopics:function(){var e=this;this.listLoading=!0,n.i(s.a)(l).then(function(t){t.success?e.setTopics(t.result.data):e.$confirm(t.result.error,"提示",{type:"warning"}).then(function(){e.$router.push("/login")}),e.listLoading=!1})},setTopics:function(e){this.totalData=e.reverse(),this.total=Math.ceil(this.totalData.length/10),this.topics=e.slice(this.page-1,10)},filterData:function(){var e=this,t=[];n.i(s.a)(l).then(function(n){if(n.success){if(e.setTopics(n.result.data),!e.filters.name)return;e.totalData.map(function(n,o){for(var a in n)if(t.indexOf(a)<0){var i=n[a]+"";if(i.indexOf(e.filters.name)>=0){t.push(n);break}}}),e.setTopics(t)}})},handleCurrentChange:function(e){this.page=e;for(var t=[],n=10*(e-1);n<10*e;n++)this.totalData[n]&&t.push(this.totalData[n]);this.topics=t},handelShow:function(e){var t=this;this.listLoading=!0,sessionStorage.setItem("roleId",e),n.i(s.b)({}).then(function(o){t.rules=o.result.data;var a=r()({roleId:e});t.showFormVisible=!0,n.i(s.c)(a).then(function(e){var n=[];e.result.data.map(function(e){"0"===e[0]?n.push(e):n.push("0"+e)}),t.listLoading=!1,t.$refs.tree.setCheckedKeys(n)},function(e){console.log(e)})})},handleEdit:function(e){this.listLoading=!0,sessionStorage.setItem("roleId",e),this.editFormVisible=!0,this.listLoading=!1},handleChange:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(t){var o=a()({},e.ruleForm,{roleId:sessionStorage.getItem("roleId")});o=r()(o),n.i(s.d)(o).then(function(t){t.success?e.$confirm("修改角色成功..","提示",{type:"success"}).then(function(){e.editFormVisible=!1,e.getTopics(),e.handleCurrentChange(e.page)}):e.$confirm(t.result.error,"提示",{type:"warning"}).then(function(){e.$router.push("/rule/list")})})}})},handleDel:function(e){var t=this;this.$confirm("确认删除吗?","提示",{type:"warning"}).then(function(){t.listLoading=!0;var o=r()({roleId:e.roleId});n.i(s.e)(o).then(function(e){t.listLoading=!1,t.$message({message:"删除成功",type:"success"}),t.getTopics(),t.handleCurrentChange(t.page)})}).catch(function(){})},filterNode:function(e,t){return console.log(e),!e||-1!==t.label.indexOf(e)},handleupdate:function(){var e=this;this.$confirm("确认修改吗?","提示",{type:"success"}).then(function(){for(var t=[],o=e.$refs.tree.getCheckedNodes(),a=0;a<o.length;a++)t.push(o[a].id);t.map(function(e,n){if(e.length>7){var o=e.slice(0,6);t.some(function(){return o.indexOf(t)>=0})||(t.push(o),t.push(o.slice(0,4)))}}),t=e.removeDuplicatedItem(t).join(",");var i=r()({roleId:sessionStorage.getItem("roleId"),data:t});console.log(i),n.i(s.f)(i).then(function(t){t.success?e.$confirm("修改权限成功..","提示",{type:"success"}).then(function(){e.showFormVisible=!1,e.getTopics(),e.$refs.pagination.pageCount=1}):e.$confirm(t.result.error,"提示",{type:"warning"}).then(function(){e.$router.push("/rule/list")})})}).catch(function(){})},removeDuplicatedItem:function(e){for(var t=[],n=0,o=e.length;n<o;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}},mounted:function(){this.getTopics()},watch:{filterText:function(e){this.$refs.tree.filter(e)}}}},660:function(e,t,n){t=e.exports=n(566)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"list.vue",sourceRoot:""}])},685:function(e,t,n){var o=n(660);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(567)("7a55f4cf",o,!0,{})},713:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[n("el-form",{attrs:{inline:!0,model:e.filters}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"搜索"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.filterData}},[e._v("查询")])],1)],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.topics,"highlight-current-row":""}},[n("el-table-column",{attrs:{prop:"roleId",label:"编号",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"roleName",label:"角色名称",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"createTime",label:"添加日期",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"addPerson",label:"添加人",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"comment",label:"备注",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.roles.indexOf("01060101")>=0,expression:"roles.indexOf('01060101') >=0"}],attrs:{type:"info",size:"small"},on:{click:function(n){e.handelShow(t.row.roleId)}}},[e._v("权限")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.roles.indexOf("01060102")>=0,expression:"roles.indexOf('01060102') >=0"}],attrs:{type:"success",size:"small"},on:{click:function(n){e.handleEdit(t.row.roleId)}}},[e._v("修改")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.roles.indexOf("01060103")>=0,expression:"roles.indexOf('01060103') >=0"}],attrs:{type:"danger",size:"small"},on:{click:function(n){e.handleDel(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),n("el-col",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],staticClass:"toolbar",attrs:{span:24}},[n("el-pagination",{ref:"pagination",staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","current-page":e.page,"page-size":e.pageSize,total:e.total*e.pageSize},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.page=t}}})],1),e._v(" "),n("el-dialog",{attrs:{title:"查看/修改","close-on-click-modal":!1},model:{value:e.showFormVisible,callback:function(t){e.showFormVisible=t},expression:"showFormVisible"}},[n("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),n("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.rules,props:e.defaultProps,"show-checkbox":"","node-key":"id","filter-node-method":e.filterNode}}),e._v(" "),n("el-button",{staticStyle:{"margin-top":"30px"},attrs:{type:"danger"},on:{click:e.handleupdate}},[e._v("修改")])],1),e._v(" "),n("el-dialog",{attrs:{title:"修改","close-on-click-modal":!1},model:{value:e.editFormVisible,callback:function(t){e.editFormVisible=t},expression:"editFormVisible"}},[n("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rulesFrom,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[n("el-input",{model:{value:e.ruleForm.roleName,callback:function(t){e.$set(e.ruleForm,"roleName",t)},expression:"ruleForm.roleName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"备注",prop:"comment"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.comment,callback:function(t){e.$set(e.ruleForm,"comment",t)},expression:"ruleForm.comment"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.handleChange}},[e._v("立即修改")])],1)],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=12.3fb2ac3858d3384e5f2c.js.map