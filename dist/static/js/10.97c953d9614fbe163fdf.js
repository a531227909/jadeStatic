webpackJsonp([10],{571:function(e,t,n){function a(e){n(681)}var r=n(41)(n(626),n(709),a,null,null);e.exports=r.exports},597:function(e,t,n){e.exports={default:n(598),__esModule:!0}},598:function(e,t,n){var a=n(29),r=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},613:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(77),r=(n.n(a),function(){function e(e,t){for(var n=""+e;n.length<t;)n="0"+n;return n}var t={dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDayNames:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonthNames:["一","二","三","四","五","六","七","八","九","十","十一","十二"],am:"上午",pm:"下午",shortAm:"上",shortPm:"下"},n=function(){var e=/\d{2}/,t=/\d{4}/,n=/\d{1,2}/,a=/\d{1,3}/,r=/.{2}/,s=/.{1,2}/,i={yy:{regex:e,name:"year"},yyyy:{regex:t,name:"year"},MM:{regex:e,name:"month"},M:{regex:n,name:"month"},dd:{regex:e,name:"date"},d:{regex:n,name:"date"},HH:{regex:e,name:"hours"},H:{regex:n,name:"hours"},hh:{regex:e,name:"hours"},h:{regex:n,name:"hours"},mm:{regex:e,name:"minutes"},m:{regex:n,name:"minutes"},s:{regex:n,name:"seconds"},ss:{regex:e,name:"seconds"},tt:{regex:r,name:"t"},t:{regex:s,name:"t"},S:{regex:a,name:"millisecond"},SS:{regex:a,name:"millisecond"},SSS:{regex:a,name:"millisecond"}};return function(e,t,n){var a,r=i[e];return r&&(a=t.match(r.regex))?(n[r.name]=a[0],a[0]):null}}();return{locale:t,format:function(t,n){if("[object Date]"!==Object.prototype.toString.call(t))return"";"[object String]"===Object.prototype.toString.call(n)&&""!==n||(n="yyyy-MM-dd HH:mm:ss");var a=t.getFullYear(),s=t.getMonth(),i=t.getDay(),o=t.getDate(),l=t.getHours(),c=t.getMinutes(),u=t.getSeconds(),m=t.getMilliseconds();return n.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|SS?S?)/g,function(t){if("\\"===t.charAt(0))return t.replace("\\","");var n=r.locale;switch(t){case"hh":return e(l<13?0===l?12:l:l-12,2);case"h":return l<13?0===l?12:l:l-12;case"HH":return e(l,2);case"H":return l;case"mm":return e(c,2);case"m":return c;case"ss":return e(u,2);case"s":return u;case"yyyy":return a;case"yy":return(a+"").substring(2);case"dddd":return n.dayNames[i];case"ddd":return n.shortDayNames[i];case"dd":return e(o,2);case"d":return o;case"MMMM":return n.monthNames[s];case"MMM":return n.shortMonthNames[s];case"MM":return e(s+1,2);case"M":return s+1;case"t":return l<12?n.shortAm:n.shortPm;case"tt":return l<12?n.am:n.pm;case"S":return m;case"SS":return e(m,2);case"SSS":return e(m,3);default:return t}})},parse:function(e,t){if(!e)return null;if("[object Date]"===Object.prototype.toString.call(e))return e;if("[object String]"!==Object.prototype.toString.call(e))return null;var a;if("[object String]"!==Object.prototype.toString.call(t)||""===t)return a=Date.parse(e),isNaN(a)?null:new Date(a);var s,i,o,l=t.match(/(\\)?(dd?|MM?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|SS?S?|.)/g),c={year:0,month:1,date:0,hours:0,minutes:0,seconds:0,millisecond:0};for(s=0;s<l.length;s++)i=l[s],o=n(i,e,c),e=null!==o?e.length>o.length?e.substring(o.length):"":e.substring(i.length);return c.t&&(r.locale.pm!==c.t&&r.locale.shortPm!==c.t||(c.hours=+c.hours+12)),c.month-=1,new Date(c.year,c.month,c.date,c.hours,c.minutes,c.seconds,c.millisecond)}}}())},617:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return c});var a=n(76),r=n.n(a),s=n(233),i=n.n(s),o=n(232),l=function(e){return i.a.post(o.a+"/jade/agent/agentPerformance.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return r.a.resolve(e.data)},function(e){console.log(e)})},c=function(e){return i.a.post(o.a+"/jade/agent/delagentPerformance.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return r.a.resolve(e.data)},function(e){console.log(e)})}},626:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(597),r=n.n(a),s=n(617),i=n(102),o=n(613);t.default={data:function(){return{filters:{name:"",time:""},totalData:[],topics:[],total:0,page:1,pageSize:10,listLoading:!1,businessList:null,old:0,totalRows:0,totalSales:0}},methods:{getTopics:function(){var e=this;this.listLoading=!0;var t=r()({sid:sessionStorage.getItem("sub_sid")});n.i(s.a)(t).then(function(t){t.success&&e.setTopics(t.result.data),e.listLoading=!1})},filterData:function(){var e=this,t=[],a=r()({sid:sessionStorage.getItem("sub_sid")});n.i(s.a)(a).then(function(n){if(n.success){if(e.setTopics(n.result.data),!e.filters.name&&!e.filters.time)return;if(e.totalData.map(function(n,a){for(var r in n)if(t.indexOf(r)<0){var s=n[r]+"";if(s.indexOf(e.filters.name)>=0){t.push(n);break}}}),e.filters.time)if(e.filters.name){var a=[];t.map(function(t,n){var r=+new Date(t.endTime);r>=+new Date(e.filters.time[0])&&r<=+new Date(e.filters.time[1])&&a.push(t)}),t=a}else t=[],e.totalData.map(function(n,a){var r=+new Date(n.endTime);r>=+new Date(e.filters.time[0])&&r<=+new Date(e.filters.time[1])&&t.push(n)});e.setTopics(t)}else;})},setTopics:function(e){this.totalData=e,this.totalSales=0,this.totalRows=0;var t={};this.totalData.map(function(e,n){t[e.fname]||(t[e.fname]={num:0,price:0}),t[e.fname].num+=parseInt(e.cnumber),t[e.fname].price+=parseInt(e.cprice)}),this.businessList=t;for(var n in this.businessList)this.totalSales+=parseInt(this.businessList[n].price),this.totalRows+=parseInt(this.businessList[n].num);this.total=Math.ceil(this.totalData.length/10),this.topics=e.slice(this.page-1,10)},clearPerformance:function(){var e=this,t=new Date(this.filters.time)?"":o.a.format(new Date(this.filters.time[0]),"yyyy-MM-dd HH:mm:ss"),a=new Date(this.filters.time)?"":o.a.format(new Date(this.filters.time[1]),"yyyy-MM-dd HH:mm:ss"),r={beginTime:t,endTime:a,sid:n.i(i.a)()};n.i(s.b)(r).then(function(t){console.log(t),t.success?(e.$message({message:"清空成功",type:"success"}),e.getTopics(),e.handleCurrentChange(1)):e.$confirm(t.result.error,"提示",{type:"warning"}).then(function(){})})},handleCurrentChange:function(e){this.page=e-1;for(var t=[],n=10*(e-1);n<10*e;n++)this.totalData[n]&&t.push(this.totalData[n]);this.topics=t}},mounted:function(){this.getTopics()}}},656:function(e,t,n){t=e.exports=n(566)(!0),t.push([e.i,"h3{font-size:17px;margin-bottom:20px}.content-wrapper{min-height:400px;margin:20px auto}.content-wrapper h3{font-size:16px}.content-wrapper .performance-list{overflow-x:hidden;overflow-y:auto}.content-wrapper .performance-list .el-col{font-size:15px;margin-bottom:14px}.performance-container{margin-top:70px}.red{color:red;font-weight:600}","",{version:3,sources:["D:/github/jadeStatic/src/components/agent/detail.vue"],names:[],mappings:"AACA,GACE,eAAgB,AAChB,kBAAoB,CACrB,AACD,iBACE,iBAAkB,AAClB,gBAAkB,CACnB,AACD,oBACE,cAAgB,CACjB,AACD,mCACE,kBAAmB,AACnB,eAAiB,CAClB,AACD,2CACE,eAAgB,AAChB,kBAAoB,CACrB,AACD,uBACE,eAAiB,CAClB,AACD,KACE,UAAY,AACZ,eAAiB,CAClB",file:"detail.vue",sourcesContent:["\nh3 {\n  font-size: 17px;\n  margin-bottom: 20px;\n}\n.content-wrapper {\n  min-height: 400px;\n  margin: 20px auto;\n}\n.content-wrapper h3 {\n  font-size: 16px;\n}\n.content-wrapper .performance-list {\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.content-wrapper .performance-list .el-col {\n  font-size: 15px;\n  margin-bottom: 14px;\n}\n.performance-container {\n  margin-top: 70px;\n}\n.red {\n  color: #f00;\n  font-weight: 600;\n}"],sourceRoot:""}])},681:function(e,t,n){var a=n(656);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(567)("08209fcd",a,!0,{})},709:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[n("el-form",{attrs:{inline:!0,model:e.filters}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"搜索"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.filterData}},[e._v("查询")])],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"danger"},on:{click:e.clearPerformance}},[e._v("清空")])],1),e._v(" "),n("div",{staticClass:"block",staticStyle:{float:"right"}},[n("el-date-picker",{attrs:{type:"daterange",placeholder:"选择时间范围"},model:{value:e.filters.time,callback:function(t){e.$set(e.filters,"time",t)},expression:"filters.time"}})],1)],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.topics,"highlight-current-row":""}},[n("el-table-column",{attrs:{prop:"sid",label:"货号",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"cname",label:"物品名称",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"cprice",label:"单价",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"数量",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        1\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"fname",label:"一级类别",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.endTime.slice(0,11))+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"ccolor",label:"种色",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"total",label:"总价",align:"center"}})],1),e._v(" "),n("el-col",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],staticClass:"toolbar",attrs:{span:24}},[n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":e.pageSize,total:e.total*e.pageSize},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),n("div",{staticClass:"performance-container"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("h3",[e._v("当前查询业绩数据")])])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.businessList,expression:"businessList"}],staticClass:"performance-list",staticStyle:{height:"380px"}},[e._l(e.businessList,function(t,a){return[n("el-row",{key:a,attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[e._v("\n            "+e._s(a)+"销售数量：\n          ")]),e._v(" "),n("el-col",{attrs:{span:1}},[e._v("\n            "+e._s(t.num)+"\n          ")]),e._v(" "),n("el-col",{attrs:{span:4}},[e._v("\n            "+e._s(a)+"类销售总价：\n          ")]),e._v(" "),n("el-col",{attrs:{span:1}},[e._v("\n            "+e._s(t.price)+"\n          ")])],1)]})],2),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.businessList,expression:"!businessList"}],staticClass:"performance-list",staticStyle:{height:"230px",padding:"0px 10px 12px"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[e._v("\n          暂无数据\n        ")])],1)],1),e._v(" "),n("div",{staticClass:"line"}),e._v(" "),n("el-row",{staticClass:"toolbar",attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[e._v("\n        总销售数量：\n      ")]),e._v(" "),n("el-col",{attrs:{span:1}},[e._v("\n        "+e._s(e.totalRows)+"\n      ")]),e._v(" "),n("el-col",{attrs:{span:4}},[e._v("\n        总销售价格：\n      ")]),e._v(" "),n("el-col",{staticClass:"red",attrs:{span:1}},[e._v("\n        "+e._s(e.totalSales)+"\n      ")])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=10.97c953d9614fbe163fdf.js.map