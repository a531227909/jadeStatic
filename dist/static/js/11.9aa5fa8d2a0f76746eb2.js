webpackJsonp([11],{569:function(e,t,n){function r(e){n(679)}var a=n(41)(n(624),n(707),r,null,null);e.exports=a.exports},597:function(e,t,n){e.exports={default:n(598),__esModule:!0}},598:function(e,t,n){var r=n(29),a=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},613:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(77),a=(n.n(r),function(){function e(e,t){for(var n=""+e;n.length<t;)n="0"+n;return n}var t={dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDayNames:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonthNames:["一","二","三","四","五","六","七","八","九","十","十一","十二"],am:"上午",pm:"下午",shortAm:"上",shortPm:"下"},n=function(){var e=/\d{2}/,t=/\d{4}/,n=/\d{1,2}/,r=/\d{1,3}/,a=/.{2}/,o=/.{1,2}/,i={yy:{regex:e,name:"year"},yyyy:{regex:t,name:"year"},MM:{regex:e,name:"month"},M:{regex:n,name:"month"},dd:{regex:e,name:"date"},d:{regex:n,name:"date"},HH:{regex:e,name:"hours"},H:{regex:n,name:"hours"},hh:{regex:e,name:"hours"},h:{regex:n,name:"hours"},mm:{regex:e,name:"minutes"},m:{regex:n,name:"minutes"},s:{regex:n,name:"seconds"},ss:{regex:e,name:"seconds"},tt:{regex:a,name:"t"},t:{regex:o,name:"t"},S:{regex:r,name:"millisecond"},SS:{regex:r,name:"millisecond"},SSS:{regex:r,name:"millisecond"}};return function(e,t,n){var r,a=i[e];return a&&(r=t.match(a.regex))?(n[a.name]=r[0],r[0]):null}}();return{locale:t,format:function(t,n){if("[object Date]"!==Object.prototype.toString.call(t))return"";"[object String]"===Object.prototype.toString.call(n)&&""!==n||(n="yyyy-MM-dd HH:mm:ss");var r=t.getFullYear(),o=t.getMonth(),i=t.getDay(),s=t.getDate(),l=t.getHours(),c=t.getMinutes(),u=t.getSeconds(),m=t.getMilliseconds();return n.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|SS?S?)/g,function(t){if("\\"===t.charAt(0))return t.replace("\\","");var n=a.locale;switch(t){case"hh":return e(l<13?0===l?12:l:l-12,2);case"h":return l<13?0===l?12:l:l-12;case"HH":return e(l,2);case"H":return l;case"mm":return e(c,2);case"m":return c;case"ss":return e(u,2);case"s":return u;case"yyyy":return r;case"yy":return(r+"").substring(2);case"dddd":return n.dayNames[i];case"ddd":return n.shortDayNames[i];case"dd":return e(s,2);case"d":return s;case"MMMM":return n.monthNames[o];case"MMM":return n.shortMonthNames[o];case"MM":return e(o+1,2);case"M":return o+1;case"t":return l<12?n.shortAm:n.shortPm;case"tt":return l<12?n.am:n.pm;case"S":return m;case"SS":return e(m,2);case"SSS":return e(m,3);default:return t}})},parse:function(e,t){if(!e)return null;if("[object Date]"===Object.prototype.toString.call(e))return e;if("[object String]"!==Object.prototype.toString.call(e))return null;var r;if("[object String]"!==Object.prototype.toString.call(t)||""===t)return r=Date.parse(e),isNaN(r)?null:new Date(r);var o,i,s,l=t.match(/(\\)?(dd?|MM?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|SS?S?|.)/g),c={year:0,month:1,date:0,hours:0,minutes:0,seconds:0,millisecond:0};for(o=0;o<l.length;o++)i=l[o],s=n(i,e,c),e=null!==s?e.length>s.length?e.substring(s.length):"":e.substring(i.length);return c.t&&(a.locale.pm!==c.t&&a.locale.shortPm!==c.t||(c.hours=+c.hours+12)),c.month-=1,new Date(c.year,c.month,c.date,c.hours,c.minutes,c.seconds,c.millisecond)}}}())},614:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"f",function(){return c}),n.d(t,"a",function(){return u}),n.d(t,"d",function(){return m}),n.d(t,"c",function(){return d}),n.d(t,"e",function(){return p});var r=n(76),a=n.n(r),o=n(233),i=n.n(o),s=n(232),l=function(e){return i.a.post(s.a+"/jade/authority/getRoleList.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},c=function(e){return i.a.post(s.a+"/jade/authority/addUser.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},u=function(e){return i.a.post(s.a+"/jade/authority/getUserList.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},m=function(e){return i.a.post(s.a+"/jade/authority/UpdateUser.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},d=function(e){return i.a.post(s.a+"/jade/authority/DelUser.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})},p=function(e){return i.a.post(s.a+"/jade/authority/getUserPerformance.action",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return a.a.resolve(e.data)},function(e){console.log(e)})}},624:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(149),a=n.n(r),o=n(597),i=n.n(o),s=n(614),l=n(613),c={};t.default={data:function(){return{filters:{name:""},roles:sessionStorage.getItem("rules"),topics:[],totalData:[],total:0,page:1,pageSize:10,listLoading:!1,roleOptions:[],editFormVisible:!1,editLoading:!1,editRuleForm:{account:"",roleId:"",telephone:"",uName:"",idNumber:""},editRules:{account:[{required:!0,message:"请输入账号",trigger:"blur"}],uName:[{required:!0,message:"请输入姓名",trigger:"blur"}],roleId:[{required:!0,message:"请输入角色",trigger:"blur"}],idNumber:[{required:!0,message:"请输入身份证",trigger:"blur"},{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"请输入正确的身份证",trigger:"blur"}],telephone:[{required:!0,message:"请输入手机号码",trigger:"blur"},{pattern:/(^\d{11}$)/,message:"请输入正确的手机号码",trigger:"blur"}]},performanceFormVisible:!1,performanceLoading:!1,performanceDate:"",performanceNum:0,performancePrice:0,activeUser:0,totalData1:[],totalRows1:0,businessList1:null,topics1:[],totalSales1:0}},methods:{getTopics:function(){var e=this;this.listLoading=!0,n.i(s.a)(c).then(function(t){t.success?e.setTopics(t.result.data):e.$confirm(t.result.error,"提示",{type:"warning"}).then(function(){}),e.listLoading=!1})},setTopics:function(e){this.totalData=e.reverse(),this.total=Math.ceil(this.totalData.length/10),this.topics=e.slice(this.page-1,10)},setTopics1:function(e){this.totalData1=e.reverse(),this.totalSales1=0,this.totalRows1=0;var t={};this.totalData1.map(function(e,n){t[e.fname]||(t[e.fname]={num:0,price:0}),t[e.fname].num+=parseInt(e.cnumber),t[e.fname].price+=parseInt(e.total)}),this.businessList1=t;for(var n in this.businessList1)this.totalSales1+=parseInt(this.businessList1[n].price),this.totalRows1+=parseInt(this.businessList1[n].num);this.topics1=e},filterData:function(){var e=this,t=[];n.i(s.a)(c).then(function(n){if(n.success){if(e.setTopics(n.result.data),!e.filters.name)return;e.totalData.map(function(n,r){for(var a in n)if(t.indexOf(a)<0){var o=n[a]+"";if(o.indexOf(e.filters.name)>=0){t.push(n);break}}}),e.setTopics(t)}})},handleCurrentChange:function(e){this.page=e-1;for(var t=[],n=10*(e-1);n<10*e;n++)this.totalData[n]&&t.push(this.totalData[n]);this.topics=t},handleEdit:function(e){var t=this;sessionStorage.setItem("roleId",e.uComment),this.activeUser=e.account,this.listLoading=!0,n.i(s.b)(i()({})).then(function(n){n.success?(t.roleOptions=n.result.data,a()(t.editRuleForm,e),t.editRuleForm.roleId=e.uComment,t.editFormVisible=!0):t.$confirm(n.result.error,"提示",{type:"warning"}).then(function(){}),t.listLoading=!1})},handleDel:function(e){var t=this;this.activeUser=e.account,this.$confirm("确认删除吗?","提示",{type:"warning"}).then(function(){t.listLoading=!0;var r=i()({account:e.account});n.i(s.c)(r).then(function(e){t.listLoading=!1,t.$message({message:"删除成功",type:"success"}),t.getTopics()})}).catch(function(){})},handleUpdate:function(){var e=this;this.listLoading=!0,this.$refs.editRuleForm.validate(function(t){t&&function(){var t=["account","idNumber","roleId","telephone","uComment","uName"],r={};for(var a in e.editRuleForm)!function(n){t.some(function(t){t===n&&(r[n]=e.editRuleForm[n])})}(a);r=i()(r),n.i(s.d)(r).then(function(t){console.log(t),t.success?e.$confirm("修改用户成功..","提示",{type:"success"}).then(function(){e.getTopics(),e.editFormVisible=!1}):e.$confirm(t.result.error,"提示",{type:"warning"}).then(function(){e.$router.push("/account/add")})})}(),e.listLoading=!1})},showPerformance:function(e){this.setTopics1([]),this.activeUser=e.account,this.performanceFormVisible=!0},getUserPerformance:function(){var e=this,t={account:this.activeUser,startDate:l.a.format(new Date(this.performanceDate[0])),endDate:l.a.format(new Date(this.performanceDate[1]))};n.i(s.e)(i()(t)).then(function(t){console.log(t),t.result.commodity.length>0?e.setTopics1(t.result.commodity):e.setTopics1([]),e.performanceNum=t.result.totalNum,e.performancePrice=t.result.totalPrice})}},mounted:function(){this.getTopics()}}},654:function(e,t,n){t=e.exports=n(566)(!0),t.push([e.i,".condition{overflow:hidden;margin-bottom:20px;line-height:40px}#yj-tiny .el-dialog--tiny{width:60%}#yj-tiny .el-col-10{width:auto}","",{version:3,sources:["D:/github/jadeStatic/src/components/account/list.vue"],names:[],mappings:"AACA,WACE,gBAAiB,AACjB,mBAAoB,AACpB,gBAAkB,CACnB,AACD,0BACE,SAAW,CACZ,AACD,oBACE,UAAY,CACb",file:"list.vue",sourcesContent:["\n.condition {\n  overflow: hidden;\n  margin-bottom: 20px;\n  line-height: 40px;\n}\n#yj-tiny .el-dialog--tiny {\n  width: 60%;\n}\n#yj-tiny .el-col-10 {\n  width: auto;\n}"],sourceRoot:""}])},679:function(e,t,n){var r=n(654);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n(567)("34195d7e",r,!0,{})},707:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[n("el-form",{attrs:{inline:!0,model:e.filters}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"搜索"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.filterData}},[e._v("查询")])],1)],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.topics,"highlight-current-row":""}},[n("el-table-column",{attrs:{prop:"account",label:"账号",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"role",label:"角色",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"uName",label:"姓名",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"telephone",label:"电话",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"idNumber",label:"身份证",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"addPerson",label:"添加人",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.roles.indexOf("01030101")>=0,expression:"roles.indexOf('01030101') >=0"}],attrs:{type:"info",size:"small"},on:{click:function(n){e.handleEdit(t.row)}}},[e._v("修改\n        ")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.roles.indexOf("01030102")>=0,expression:"roles.indexOf('01030102') >=0"}],attrs:{type:"danger",size:"small"},on:{click:function(n){e.handleDel(t.row)}}},[e._v("\n          删除\n        ")]),e._v(" "),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){e.showPerformance(t.row)}}},[e._v("业绩")])]}}])})],1),e._v(" "),n("el-col",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],staticClass:"toolbar",attrs:{span:24}},[n("el-pagination",{ref:"pagination",staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":e.pageSize,total:e.total*e.pageSize},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),n("el-dialog",{attrs:{title:"修改","close-on-click-modal":!1},model:{value:e.editFormVisible,callback:function(t){e.editFormVisible=t},expression:"editFormVisible"}},[n("el-form",{ref:"editRuleForm",attrs:{model:e.editRuleForm,inline:!0,"label-width":"120px",rules:e.editRules}},[n("el-form-item",{attrs:{label:"账号：",prop:"account"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editRuleForm.account,callback:function(t){e.$set(e.editRuleForm,"account",t)},expression:"editRuleForm.account"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"角色：",prop:"roleId"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editRuleForm.roleId,callback:function(t){e.$set(e.editRuleForm,"roleId",t)},expression:"editRuleForm.roleId"}},e._l(e.roleOptions,function(e){return n("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"姓名：",prop:"uName"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editRuleForm.uName,callback:function(t){e.$set(e.editRuleForm,"uName",t)},expression:"editRuleForm.uName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"电话：",prop:"telephone"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editRuleForm.telephone,callback:function(t){e.$set(e.editRuleForm,"telephone",t)},expression:"editRuleForm.telephone"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"身份证号码：",prop:"idNumber"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editRuleForm.idNumber,callback:function(t){e.$set(e.editRuleForm,"idNumber",t)},expression:"editRuleForm.idNumber"}})],1),e._v(" "),n("br"),e._v(" "),n("el-form-item",{staticStyle:{"margin-left":"40%","margin-bottom":"0"}},[n("el-button",{attrs:{type:"danger"},on:{click:e.handleUpdate}},[e._v("修改")])],1)],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"查看",size:"tiny","close-on-click-modal":!1,id:"yj-tiny"},model:{value:e.performanceFormVisible,callback:function(t){e.performanceFormVisible=t},expression:"performanceFormVisible"}},[n("el-row",{staticClass:"condition"},[n("el-col",{attrs:{span:10}},[e._v("\n        时间段业绩查询：\n      ")]),e._v(" "),n("el-col",{attrs:{span:12,offset:2}},[n("el-date-picker",{attrs:{type:"daterange",format:"yyyy-MM-dd",placeholder:"选择日期范围"},on:{change:e.getUserPerformance},model:{value:e.performanceDate,callback:function(t){e.performanceDate=t},expression:"performanceDate"}})],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:10}},[e._v("\n        购买商品数量："+e._s(e.performanceNum)+"\n      ")]),e._v(" "),n("el-col",{attrs:{span:12,offset:2}},[e._v("\n        总消费数量："+e._s(e.performancePrice)+"\n      ")])],1),e._v(" "),n("el-row",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.topics1,"highlight-current-row":""}},[n("el-table-column",{attrs:{prop:"cid",label:"货号",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"物品名称",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"price",label:"单价",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"color",label:"种色",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"price",label:"总价",align:"center"}})],1)],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=11.9aa5fa8d2a0f76746eb2.js.map